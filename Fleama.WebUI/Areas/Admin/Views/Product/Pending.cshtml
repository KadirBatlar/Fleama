@model IEnumerable<Product>
@{
    ViewData["Title"] = "Bekleyen Ürünler";
    Layout = "_LayoutAdmin";
}

<h2><i class="fas fa-clock me-2"></i> Bekleyen Ürünler</h2>

@if (TempData["Message"] != null)
{
    <div class="alert alert-info alert-dismissible fade show" role="alert">
        @TempData["Message"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (Model != null && Model.Any())
{
    <div class="table-responsive">
        <table class="table table-hover table-bordered text-center align-middle">
            <thead class="table-light">
                <tr>
                    <th>Ürün Adı</th>
                    <th>Görsel</th>
                    <th>Açıklama</th>
                    <th>Fiyat</th>
                    <th>Kullanıcı</th>
                    <th>Kategori</th>
                    <th>Marka</th>
                    <th>İşlemler</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>
                            @if (item.Images?.FirstOrDefault() != null)
                            {
                                <img src="@item.Images.First().Url" width="60" class="img-thumbnail" />
                            }
                            else
                            {
                                <span class="text-muted">Görsel yok</span>
                            }
                        </td>
                        <td>
                            @if (!string.IsNullOrEmpty(item.Description))
                            {
                                <span>@(item.Description.Length > 50 ? item.Description.Substring(0, 50) + "..." : item.Description)</span>
                            }
                            else
                            {
                                <span class="text-muted">Açıklama yok</span>
                            }
                        </td>
                        <td>
                            @if (item.Price.HasValue)
                            {
                                <span>@item.Price.Value.ToString("C")</span>
                            }
                            else
                            {
                                <span class="text-muted">Fiyat belirtilmemiş</span>
                            }
                        </td>
                        <td>@(item.User?.Name ?? "Bilinmiyor")</td>
                        <td>
                            @if (item.CategoryId.HasValue && item.Category != null)
                            {
                                <span>@item.Category.Name</span>
                            }
                            else
                            {
                                <span class="text-muted">Kategori seçilmemiş</span>
                            }
                        </td>
                        <td>
                            @if (item.BrandId.HasValue && item.Brand != null)
                            {
                                <span>@item.Brand.Name</span>
                            }
                            else
                            {
                                <span class="text-muted">Marka seçilmemiş</span>
                            }
                        </td>
                        <td>
                            <div class="btn-group" role="group">
                                <form asp-action="Approve" method="post" class="d-inline">
                                    <input type="hidden" name="id" value="@item.Id" />
                                    <button type="submit" class="btn btn-sm btn-success me-1" onclick="return confirm('Bu ürünü onaylamak istediğinizden emin misiniz?');">
                                        <i class="fas fa-check"></i> Onayla
                                    </button>
                                </form>
                                <form asp-action="Reject" method="post" class="d-inline">
                                    <input type="hidden" name="id" value="@item.Id" />
                                    <button type="submit" class="btn btn-sm btn-danger me-1" onclick="return confirm('Bu ürünü reddetmek istediğinizden emin misiniz?');">
                                        <i class="fas fa-times"></i> Reddet
                                    </button>
                                </form>
                                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-edit"></i> Düzenle
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="alert alert-info">
        <i class="fas fa-info-circle me-2"></i>
        Şu anda bekleyen ürün bulunmamaktadır.
    </div>
}

